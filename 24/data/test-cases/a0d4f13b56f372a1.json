{"uid":"a0d4f13b56f372a1","name":"A.21 POST Подтверждение смены почты пользователя. Токен из ссылки auth/change_email/{token}.","fullName":"tests.api_tests.api_test.TestAPI#test_post_auth_change_email_confirm","historyId":"bfb75cca0cd3d4da836a91acf40d98d8","time":{"start":1763502361605,"stop":1763502367812,"duration":6207},"status":"failed","statusMessage":"AssertionError: Unexpected status code. Expected: 204. Actual: 400","statusTrace":"self = <tests.api_tests.api_test.TestAPI object at 0x7f3fec11e870>\nuse_api_base = <api_testing.api_base.ApiBase object at 0x7f3fec1542c0>\n\n    @allure.title(\"A.21 POST Подтверждение смены почты пользователя. Токен из ссылки auth/change_email/{token}.\")\n    def test_post_auth_change_email_confirm(self, use_api_base):\n        jwt = use_api_base.create_tokens(email1, password0)[0]\n        url = f'{self.link.BASE_URL}auth/change_email_confirm/'\n        token_email = use_api_base.get_token_on_email(email2, password2, 'token=')\n        response = requests.post(url, headers={'accept': 'application/json', 'Authorization': f\"{jwt}\"},\n                                 json={\"token\": token_email, \"email\": email2, \"password\": password0})\n>       Assertions.assert_status_code(response, self.code.STATUS_CREATE)\n\ntests/api_tests/api_test.py:206: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [400]>, expected_status_code = 204\n\n    @staticmethod\n    def assert_status_code(response: Response, expected_status_code: int):\n        actual_status_code = response.status_code\n        with allure.step(f\"Expected status {expected_status_code}\"):\n>           assert actual_status_code == expected_status_code, \\\n                f\"Unexpected status code. Expected: {expected_status_code}. Actual: {actual_status_code}\"\nE           AssertionError: Unexpected status code. Expected: 204. Actual: 400\n\napi_testing/assertions.py:11: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_session_faker","time":{"start":1763502230033,"stop":1763502230048,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"clear_allure_result_folder","time":{"start":1763502230049,"stop":1763502230049,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"use_api_base","time":{"start":1763502361604,"stop":1763502361604,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Unexpected status code. Expected: 204. Actual: 400","statusTrace":"self = <tests.api_tests.api_test.TestAPI object at 0x7f3fec11e870>\nuse_api_base = <api_testing.api_base.ApiBase object at 0x7f3fec1542c0>\n\n    @allure.title(\"A.21 POST Подтверждение смены почты пользователя. Токен из ссылки auth/change_email/{token}.\")\n    def test_post_auth_change_email_confirm(self, use_api_base):\n        jwt = use_api_base.create_tokens(email1, password0)[0]\n        url = f'{self.link.BASE_URL}auth/change_email_confirm/'\n        token_email = use_api_base.get_token_on_email(email2, password2, 'token=')\n        response = requests.post(url, headers={'accept': 'application/json', 'Authorization': f\"{jwt}\"},\n                                 json={\"token\": token_email, \"email\": email2, \"password\": password0})\n>       Assertions.assert_status_code(response, self.code.STATUS_CREATE)\n\ntests/api_tests/api_test.py:206: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [400]>, expected_status_code = 204\n\n    @staticmethod\n    def assert_status_code(response: Response, expected_status_code: int):\n        actual_status_code = response.status_code\n        with allure.step(f\"Expected status {expected_status_code}\"):\n>           assert actual_status_code == expected_status_code, \\\n                f\"Unexpected status code. Expected: {expected_status_code}. Actual: {actual_status_code}\"\nE           AssertionError: Unexpected status code. Expected: 204. Actual: 400\n\napi_testing/assertions.py:11: AssertionError","steps":[{"name":"Получить access токен пользователя","time":{"start":1763502361605,"stop":1763502362691,"duration":1086},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Прочитать сообщение","time":{"start":1763502362691,"stop":1763502364553,"duration":1862},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Получить письмо","time":{"start":1763502367072,"stop":1763502367072,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Получить ссылку в сообщении","time":{"start":1763502367072,"stop":1763502367072,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Expected status 204","time":{"start":1763502367811,"stop":1763502367811,"duration":0},"status":"failed","statusMessage":"AssertionError: Unexpected status code. Expected: 204. Actual: 400\n","statusTrace":"  File \"/home/runner/work/PulseWave/PulseWave/api_testing/assertions.py\", line 11, in assert_status_code\n    assert actual_status_code == expected_status_code, \\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"stepsCount":5,"shouldDisplayMessage":true,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Тестирование API"},{"name":"tag","value":"smoke"},{"name":"parentSuite","value":"tests.api_tests"},{"name":"suite","value":"api_test"},{"name":"subSuite","value":"TestAPI"},{"name":"host","value":"runnervmg1sw1"},{"name":"thread","value":"2565-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api_tests.api_test"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":14,"unknown":0,"total":15},"items":[{"uid":"d09457e379c35916","reportUrl":"https://Nat754.github.io/PulseWave/576/#testresult/d09457e379c35916","status":"passed","time":{"start":1763437437033,"stop":1763437440651,"duration":3618}},{"uid":"bcd46101e86d2031","reportUrl":"https://Nat754.github.io/PulseWave/575/#testresult/bcd46101e86d2031","status":"passed","time":{"start":1763351305110,"stop":1763351312227,"duration":7117}},{"uid":"eca9789cb5fa0cb3","reportUrl":"https://Nat754.github.io/PulseWave/574/#testresult/eca9789cb5fa0cb3","status":"passed","time":{"start":1763264903393,"stop":1763264910690,"duration":7297}},{"uid":"7be179ced063cac8","reportUrl":"https://Nat754.github.io/PulseWave/573/#testresult/7be179ced063cac8","status":"passed","time":{"start":1763177950009,"stop":1763177953316,"duration":3307}},{"uid":"9dd722786f9cf915","reportUrl":"https://Nat754.github.io/PulseWave/23/#testresult/9dd722786f9cf915","status":"passed","time":{"start":1763136865013,"stop":1763136869354,"duration":4341}},{"uid":"2e1029b68014d54e","reportUrl":"https://Nat754.github.io/PulseWave/572/#testresult/2e1029b68014d54e","status":"passed","time":{"start":1763091909610,"stop":1763091913993,"duration":4383}},{"uid":"716556b2d3d78cc8","reportUrl":"https://Nat754.github.io/PulseWave/21/#testresult/716556b2d3d78cc8","status":"passed","time":{"start":1763010340183,"stop":1763010351600,"duration":11417}},{"uid":"9380aa7905fb383f","reportUrl":"https://Nat754.github.io/PulseWave/571/#testresult/9380aa7905fb383f","status":"passed","time":{"start":1763005547901,"stop":1763005551388,"duration":3487}},{"uid":"5dc721fd6a536175","reportUrl":"https://Nat754.github.io/PulseWave/20/#testresult/5dc721fd6a536175","status":"passed","time":{"start":1762978494386,"stop":1762978511993,"duration":17607}},{"uid":"85b9aab85c781d16","reportUrl":"https://Nat754.github.io/PulseWave/19/#testresult/85b9aab85c781d16","status":"passed","time":{"start":1762975141519,"stop":1762975153594,"duration":12075}},{"uid":"208c70e6d6510fc5","reportUrl":"https://Nat754.github.io/PulseWave/18/#testresult/208c70e6d6510fc5","status":"passed","time":{"start":1762971502257,"stop":1762971505849,"duration":3592}},{"uid":"b52fd6eb6404531f","reportUrl":"https://Nat754.github.io/PulseWave/570/#testresult/b52fd6eb6404531f","status":"passed","time":{"start":1762919090644,"stop":1762919101845,"duration":11201}},{"uid":"84c258c319f4b8e8","reportUrl":"https://Nat754.github.io/PulseWave/17/#testresult/84c258c319f4b8e8","status":"passed","time":{"start":1762877122450,"stop":1762877171937,"duration":49487}},{"uid":"ed4e553d0f0eab8e","reportUrl":"https://Nat754.github.io/PulseWave/16/#testresult/ed4e553d0f0eab8e","status":"passed","time":{"start":1762875252586,"stop":1762875257264,"duration":4678}}]},"tags":["smoke"]},"source":"a0d4f13b56f372a1.json","parameterValues":[]}